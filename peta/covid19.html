<html>
<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-155363284-5"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-155363284-5');
  </script>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#000000">
  <meta name="description" content="Ruang Peta Digital">
  <meta name="author" content="Panji Danutirto">
  <link rel="icon" sizes="196x196" href="assets/img/logo.png">
  <link rel="icon" type="image" href="assets/img/logo.png">
    
  <title>Peta Sebaran Covid19 di Indonesia</title>

  <!-- Load Leaflet from CDN -->
  <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
  integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
  crossorigin=""></script>
  <!-- Load Esri Leaflet from CDN -->
  <script src="https://unpkg.com/esri-leaflet@2.3.3/dist/esri-leaflet.js"
  integrity="sha512-cMQ5e58BDuu1pr9BQ/eGRn6HaR6Olh0ofcHFWe5XesdCITVuSBiBZZbhCijBe5ya238f/zMMRYIMIIg1jxv4sQ=="
  crossorigin=""></script>
  <!-- Load Leaflet MarkerCluster and Esri Leaflet Cluster from CDN -->
  <link rel="stylesheet" type="text/css"
    href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.Default.css"
    integrity="sha512-BBToHPBStgMiw0lD4AtkRIZmdndhB6aQbXpX7omcrXeG2PauGBl2lzq2xUZTxaLxYz5IDHlmneCZ1IJ+P3kYtQ=="
    crossorigin="">
  <link rel="stylesheet" type="text/css" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css"
    integrity="sha512-RLEjtaFGdC4iQMJDbMzim/dOvAu+8Qp9sw7QE4wIMYcg2goVoivzwgSZq9CsIxp4xKAZPKh5J2f2lOko2Ze6FQ=="
    crossorigin="">
  <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
  <link rel="stylesheet" href="assets/css/L.Control.BetterScale.css">
  <link rel="stylesheet" type="text/css" href="assets/css/L.Control.ZoomBar.css"/>
  <link rel="stylesheet" href="assets/css/leaflet.css"/>
  <link rel="stylesheet" href="assets/css/bootstrap.min.css">
  <link rel="stylesheet" href="assets/css/Control.MiniMap.min.css">
  <link rel="stylesheet" href="assets/css/L.Control.Locate.min.css">
  <link rel="stylesheet" href="assets/css/L.Control.MousePosition.css">
  <link rel="stylesheet" href="assets/css/leaflet.groupedlayercontrol.css"/>
  
  <style>
    body { margin:0; padding:0; }
    #map { position: absolute; top:0; bottom:0; right:0; left:0; }
  </style>
</head>
<body>
  <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
      <a class="navbar-brand" href="covid19.html">
          <img src="assets/img/covid.png" width="30" height="30" class="d-inline-block align-top" alt="">
          INACOVID19
        </a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarsExampleDefault">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item">
            <a class="nav-link" href="../index.html">Home</a>
          </li>
        </ul>
      </div>
    </nav>
    
<div id="map" style="width: 100%; height: 100%;overflow: hidden;"></div>

<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script>window.jQuery || document.write('<script src="assets/js/jquery-slim.min.js"><\/script>')</script>
<script src="assets/js/popper.min.js"></script>
<script src="assets/js/bootstrap.min.js"></script>
<script src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js"
    integrity="sha512-MQlyPV+ol2lp4KodaU/Xmrn+txc1TP15pOBF/2Sfre7MRsA/pB4Vy58bEqe9u7a7DczMLtU5wT8n7OblJepKbg=="
    crossorigin=""></script>
<script src="https://unpkg.com/esri-leaflet-cluster@2.0.1/dist/esri-leaflet-cluster.js"
    integrity="sha512-2/Nwrks+A2omjKeWrF4TKFLIrUbAhSl8EDEm6xunuwXXYqMoJI71PZtlW0/vqt9d3DOyP1md/bzAnNH2KuAhaQ=="
    crossorigin=""></script>
<script src="assets/js/L.Control.Locate.min.js"></script>
<script src="assets/js/leaflet.browser.print.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/dom-to-image/2.6.0/dom-to-image.js"></script>
<script src="assets/js/L.Control.BetterScale.js"></script>
<script type="text/javascript" src="assets/js/L.Control.ZoomBar.js"></script>
<script src="assets/js/leaflet.groupedlayercontrol.js"></script>
<script src="assets/js/Control.MiniMap.min.js"></script>
<script src="assets/js/L.Control.MousePosition.js"></script>
<script>

        var map = new L.Map('map', {
                  zoomControl: false,
                  attribution: false,
                  continuousWorld: true
              });
              map.setView(new L.LatLng(-1.40, 117.60),5);

        //Basemaps
        var esristreets = L.esri.basemapLayer('Streets').addTo(map);
        var osmUrl='http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';
        var osmAttrib='Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a>';
        var osm = new L.TileLayer(osmUrl, {minZoom: 0, maxZoom: 18, attribution: osmAttrib});
        var rbi = L.esri.dynamicMapLayer({ 
                  url: 'https://gis.bmkg.go.id/arcgis/rest/services/RBI_18/RBI_25_50_250_wms/MapServer', 
                  opacity: 100,
                  f: 'feature',
                  useCors: false
                  });

        var COVID19_Indonesia_per_Provinsi = L.esri.Cluster.featureLayer({
        url: 'https://services5.arcgis.com/VS6HdKS0VfIhv8Ct/ArcGIS/rest/services/COVID19_Indonesia_per_Provinsi/FeatureServer/0'
        }).bindPopup(function (layer) {
           return "<b>Kode Provinsi :</b>&nbsp;" + layer.feature.properties.Kode_Provi + "<br>" +
                  "<b>Provinsi :</b>&nbsp;" + layer.feature.properties.Provinsi + "<br>" +
                  "<b>Kasus Positif :</b>&nbsp;" + layer.feature.properties.Kasus_Posi + "<br>" +
                  "<b>Kasus Sembuh :</b>&nbsp;" + layer.feature.properties.Kasus_Semb + "<br>" +
                  "<b>Kasus Meninggal :</b>&nbsp;" + layer.feature.properties.Kasus_Meni;
        }).addTo(map);
        var RS_Rujukan_COVID19_Indonesia = L.esri.Cluster.featureLayer({
            url: 'https://services5.arcgis.com/VS6HdKS0VfIhv8Ct/ArcGIS/rest/services/RS_Rujukan_COVID19_Indonesia/FeatureServer/0'
        }).bindPopup(function (layer) {
           return "<b>Nama :</b>&nbsp;" + layer.feature.properties.Nama + "<br>" +
                  "<b>Provinsi :</b>&nbsp;" + layer.feature.properties.Provinsi + "<br>" +
                  "<b>Alamat :</b>&nbsp;" + layer.feature.properties.Alamat + "<br>" +
                  "<b>Telepon :</b>&nbsp;" + layer.feature.properties.Telepon + "<br>" +
                  "<b>Keterangan :</b>&nbsp;" + layer.feature.properties.Keterangan;
        });
        var covid19esri = L.esri.Cluster.featureLayer({
            url: 'https://services1.arcgis.com/0MSEUqKaxRlEPj5g/ArcGIS/rest/services/Coronavirus_2019_nCoV_Cases/FeatureServer/0'
        }).bindPopup(function (layer) {
           return "<b>Province_State :</b>&nbsp;" + layer.feature.properties.Province_State + "<br>" +
                  "<b>Country_Region :</b>&nbsp;" + layer.feature.properties.Country_Region + "<br>" +
                  "<b>Last_Update :</b>&nbsp;" + layer.feature.properties.Last_Update + "<br>" +
                  "<b>Lat :</b>&nbsp;" + layer.feature.properties.Lat + "<br>" +
                  "<b>Long_ :</b>&nbsp;" + layer.feature.properties.Long_ + "<br>" +
                  "<b>Confirmed :</b>&nbsp;" + layer.feature.properties.Confirmed + "<br>" +
                  "<b>Recovered :</b>&nbsp;" + layer.feature.properties.Recovered + "<br>" +
                  "<b>Deaths :</b>&nbsp;" + layer.feature.properties.Deaths;
        });
        var RS_Rujukan = L.esri.Cluster.featureLayer({
            url: 'https://siaga.bnpb.go.id/arcgis/rest/services/COVID19/RS_Rujukan/MapServer/0'
        }).bindPopup(function (layer) {
           return "<b>Name :</b>&nbsp;" + layer.feature.properties.Name + "<br>" +
                  "<b>Keterangan :</b>&nbsp;" + layer.feature.properties.Keterangan + "<br>" +
                  "<b>Ket :</b>&nbsp;" + layer.feature.properties.Ket;
        });

        //Layer Group
        var Basemaps = {
          "Rupabumi Indonesia": rbi,
          "Openstreet Map": osm,
          "Streets": esristreets
        };
        var groupedOverlays = {
        "BNPB": {
          "Kasus Covid-19 Indonesia" : COVID19_Indonesia_per_Provinsi,
          "RS Rujukan dan Lab" : RS_Rujukan,
          "RS Rujukan" : RS_Rujukan_COVID19_Indonesia,
        },
        "ESRI": {
          "Kasus Covid-19 Global" : covid19esri,
        },
            };
        L.control.groupedLayers(Basemaps, groupedOverlays).addTo(map);

        //Home
        var zoom_bar = new L.Control.ZoomBar({position: 'topleft'}).addTo(map);

        //Print
        L.control.browserPrint({
        printModes: [
        L.control.browserPrint.mode.landscape(),
        L.control.browserPrint.mode.portrait()
        ]}).addTo(map);
        map.on("browser-print-start", function(e){
        });

        //Scale
        L.control.betterscale({metric:true, imperial: false}).addTo(map);

        L.control.mousePosition({position: 'bottomleft'}).addTo(map);

        // GPS
        var lc = L.control.locate({
            strings: {
            title: "Lokasi Saya"
            }
        }).addTo(map);

        //Plugin magic goes here! Note that you cannot use the same layer object again, as that will confuse the two map controls
        var osm2 = new L.TileLayer(osmUrl, {minZoom: 2, maxZoom: 18, attribution: osmAttrib });
        var miniMap = new L.Control.MiniMap(osm2, { position: 'bottomleft', toggleDisplay: true, minimized: true }).addTo          (map);

</script>

</body>
</html>